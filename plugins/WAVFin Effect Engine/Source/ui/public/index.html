ou also
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAVFin Effect Engine</title>

    <!-- MOCK JUCE FOR BROWSER PREVIEW -->
    <script>
        if (typeof window.__JUCE__ === 'undefined') {
            console.log("Injecting Mock JUCE for Browser Preview");
            window.__JUCE__ = {
                initialisationData: {
                    __juce__sliders: [],
                    __juce__toggles: [],
                    __juce__comboBoxes: [],
                    __juce__functions: [],
                    __juce__platform: ["browser"]
                },
                backend: {
                    addEventListener: () => { },
                    emitEvent: () => { }
                }
            };
        }
    </script>

    <script type="module" src="js/index.js"></script>
    <style>
        /* ----- MODERN ENHANCED PALETTE ----- */
        :root {
            --primary: #f59e0b;
            --primary-glow: rgba(245, 158, 11, 0.5);
            --secondary: #06b6d4;
            --accent: #8b5cf6;

            --bg-deep: #020617;
            --bg-card: rgba(30, 41, 59, 0.4);
            --bg-card-active: rgba(30, 41, 59, 0.7);

            --border-dim: rgba(255, 255, 255, 0.05);
            --border-bright: rgba(255, 255, 255, 0.15);

            --text-main: #f8fafc;
            --text-dim: #94a3b8;

            --font-stack: 'Outfit', 'Inter', system-ui, sans-serif;
        }

        @keyframes mesh-pulse {
            0% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(5%, 5%) scale(1.1);
            }

            66% {
                transform: translate(-5%, 2%) scale(0.9);
            }

            100% {
                transform: translate(0, 0) scale(1);
            }
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-user-drag: none;
        }

        body {
            background: var(--bg-deep);
            color: var(--text-main);
            font-family: var(--font-stack);
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        #plugin-window {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            background: var(--bg-deep);
        }

        /* DYNAMIC MESH BACKGROUND */
        .mesh-bg {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(circle at 30% 30%, rgba(245, 158, 11, 0.12) 0%, transparent 40%),
                radial-gradient(circle at 70% 20%, rgba(6, 182, 212, 0.12) 0%, transparent 40%),
                radial-gradient(circle at 50% 80%, rgba(139, 92, 246, 0.12) 0%, transparent 40%);
            filter: blur(80px);
            animation: mesh-pulse 20s infinite alternate ease-in-out;
            pointer-events: none;
            z-index: 0;
        }

        /* TEXTURE OVERLAY */
        .overlay-texture {
            position: absolute;
            inset: 0;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyIiBoZWlnaHQ9IjIiPjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4wMSkiLz48L3N2Zz4=');
            opacity: 0.3;
            pointer-events: none;
            z-index: 2;
        }

        header {
            padding: 16px 32px;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-dim);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-logo {
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            box-shadow: 0 0 16px var(--primary);
            position: relative;
        }

        .brand-logo::after {
            content: '';
            position: absolute;
            inset: -4px;
            border: 1px solid var(--primary);
            border-radius: 50%;
            opacity: 0.3;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        h1 {
            font-size: 16px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 4px;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .header-controls {
            display: flex;
            gap: 32px;
        }

        /* MAIN GRID (2 ROWS, 4 COLUMNS) */
        main {
            flex: 1;
            padding: 20px 24px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 16px;
            z-index: 5;
            overflow: hidden;
        }

        /* MODULE CARDS (COMPACT HEIGHT, WIDER WIDTH) */
        .module-card {
            background: rgba(30, 41, 59, 0.45);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 14px;
            transition: all 0.2s ease;
            backdrop-filter: blur(16px);
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            min-height: 0;
            max-height: 280px;
            /* LOCK HEIGHT */
        }

        .module-card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            background: rgba(30, 41, 59, 0.55);
        }

        .module-card.active {
            border-color: var(--primary);
            background: rgba(30, 41, 59, 0.7);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.1);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .module-title {
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-dim);
        }

        .module-card.active .module-title {
            color: var(--primary);
        }

        /* REORGANIZED CONTENT LAYOUT (Narrower cards) */
        .module-content {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            /* Split controls into two columns */
            justify-items: center;
            align-items: center;
            gap: 12px 10px;
            /* Vertical and Horizontal gaps */
            min-height: 0;
            padding-top: 4px;
        }

        /* For modules with only 2 knobs, we can keep them in one row if they fit better */
        #mod-halftime .module-content,
        #mod-autopan .module-content {
            grid-template-columns: 1fr 1fr;
        }

        /* 3-item modules will naturally flow to 2nd row */
        /* Center the last item if it's alone on the row */
        .module-content> :last-child:nth-child(odd) {
            grid-column: span 2;
        }

        /* ENHANCED KNOBS */
        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            width: 100%;
        }

        .knob-container {
            position: relative;
            width: 48px;
            height: 48px;
            cursor: ns-resize;
        }

        .knob-container.small {
            width: 32px;
            height: 32px;
        }

        .knob-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .knob-track {
            fill: none;
            stroke: rgba(0, 0, 0, 0.3);
            stroke-width: 5;
        }

        .knob-value-arc {
            fill: none;
            stroke: var(--primary);
            stroke-width: 5;
            stroke-linecap: round;
            filter: drop-shadow(0 0 8px var(--primary-glow));
            opacity: 0.4;
            transition: opacity 0.3s;
        }

        .module-card.active .knob-value-arc {
            opacity: 1;
        }

        .knob-dot {
            fill: var(--primary);
            filter: drop-shadow(0 0 4px var(--primary));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .module-card.active .knob-dot {
            opacity: 1;
        }

        .knob-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10px;
            font-weight: 700;
            color: var(--text-dim);
            pointer-events: none;
        }

        .module-card.active .knob-text {
            color: var(--text-main);
        }

        .control-label {
            font-size: 9px;
            font-weight: 600;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* MODERN TOGGLE */
        .toggle {
            width: 36px;
            height: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 100px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border-dim);
        }

        .toggle.active {
            background: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 12px var(--primary-glow);
        }

        .toggle-handle {
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .toggle.active .toggle-handle {
            transform: translateX(16px);
        }

        /* SELECTOR */
        .selector {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-dim);
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 10px;
            font-weight: 700;
            color: var(--text-dim);
            cursor: pointer;
            transition: all 0.2s;
        }

        .selector:hover {
            color: var(--text-main);
            border-color: var(--border-bright);
        }
    </style>
</head>

<body>

    <div id="plugin-window">
        <div class="mesh-bg"></div>
        <div class="overlay-texture"></div>

        <header>
            <div class="brand">
                <div class="brand-logo"></div>
                <h1>WAVFin Effect Engine</h1>
            </div>

            <div class="header-controls">
                <!-- GLOBAL MIX (SMALL) -->
                <div class="control-group small">
                    <div class="knob-container small" data-param="global_mix" data-min="0" data-max="100"
                        data-value="100" data-suffix="%"></div>
                    <div class="control-label">MIX</div>
                </div>

                <!-- OUTPUT GAIN (SMALL) -->
                <div class="control-group small">
                    <div class="knob-container small" data-param="output_gain" data-min="-24" data-max="24"
                        data-value="0" data-suffix="dB"></div>
                    <div class="control-label">OUTPUT</div>
                </div>
            </div>
        </header>

        <main>
            <!-- 1. HALFTIME -->
            <div class="module-card" id="mod-halftime">
                <div class="module-header">
                    <span class="module-title">Halftime</span>
                    <div class="toggle" data-param="halftime_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="halftime_mix" data-min="0" data-max="100"
                            data-value="100" data-suffix="%"></div>
                        <div class="control-label">MIX</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="halftime_fade" data-min="0" data-max="100"
                            data-value="10" data-suffix="ms"></div>
                        <div class="control-label">SMOOTH</div>
                    </div>
                </div>
            </div>

            <!-- 2. SATURATION -->
            <div class="module-card" id="mod-sat">
                <div class="module-header">
                    <span class="module-title">Sat</span>
                    <div class="toggle" data-param="sat_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="sat_drive" data-min="0" data-max="48" data-value="0"
                            data-suffix="dB"></div>
                        <div class="control-label">DRIVE</div>
                    </div>
                    <div class="control-group">
                        <div class="selector" id="sat_type_display">TUBE</div>
                        <div class="control-label">TYPE</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="sat_mix" data-min="0" data-max="100" data-value="100"
                            data-suffix="%"></div>
                        <div class="control-label">MIX</div>
                    </div>
                </div>
            </div>

            <!-- 3. AUTO FILTER -->
            <div class="module-card" id="mod-filter">
                <div class="module-header">
                    <span class="module-title">Filter</span>
                    <div class="toggle" data-param="filter_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="filter_cutoff" data-min="20" data-max="20000"
                            data-value="2000" data-suffix="Hz" data-log="true"></div>
                        <div class="control-label">FREQ</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="filter_res" data-min="0" data-max="1" data-value="0.1"
                            data-suffix=""></div>
                        <div class="control-label">RES</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="filter_lfo_rate" data-min="0" data-max="20"
                            data-value="2" data-suffix="Hz"></div>
                        <div class="control-label">RATE</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="filter_lfo_depth" data-min="0" data-max="100"
                            data-value="0" data-suffix="%"></div>
                        <div class="control-label">DEPTH</div>
                    </div>
                </div>
            </div>

            <!-- 4. VINTAGE -->
            <div class="module-card" id="mod-vintage">
                <div class="module-header">
                    <span class="module-title">Vintage</span>
                    <div class="toggle" data-param="vintage_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="vintage_wow" data-min="0" data-max="100" data-value="20"
                            data-suffix="%"></div>
                        <div class="control-label">WOW</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="vintage_flutter" data-min="0" data-max="100"
                            data-value="20" data-suffix="%"></div>
                        <div class="control-label">FLUTR</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="vintage_noise" data-min="0" data-max="100"
                            data-value="0" data-suffix="%"></div>
                        <div class="control-label">NOISE</div>
                    </div>
                </div>
            </div>

            <!-- 5. CHORUS -->
            <div class="module-card" id="mod-chorus">
                <div class="module-header">
                    <span class="module-title">Chorus</span>
                    <div class="toggle" data-param="chorus_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="chorus_rate" data-min="0" data-max="10" data-value="1.0"
                            data-suffix="Hz"></div>
                        <div class="control-label">RATE</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="chorus_depth" data-min="0" data-max="100"
                            data-value="50" data-suffix="%"></div>
                        <div class="control-label">DEPTH</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="chorus_mix" data-min="0" data-max="100" data-value="50"
                            data-suffix="%"></div>
                        <div class="control-label">MIX</div>
                    </div>
                </div>
            </div>

            <!-- 6. AUTOPAN -->
            <div class="module-card" id="mod-autopan">
                <div class="module-header">
                    <span class="module-title">Autopan</span>
                    <div class="toggle" data-param="pan_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="pan_rate" data-min="0" data-max="20" data-value="1.0"
                            data-suffix="Hz"></div>
                        <div class="control-label">RATE</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="pan_depth" data-min="0" data-max="100" data-value="100"
                            data-suffix="%"></div>
                        <div class="control-label">DEPTH</div>
                    </div>
                </div>
            </div>

            <!-- 7. DELAY -->
            <div class="module-card" id="mod-delay">
                <div class="module-header">
                    <span class="module-title">Delay</span>
                    <div class="toggle" data-param="delay_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="delay_time" data-min="0" data-max="2000"
                            data-value="500" data-suffix="ms"></div>
                        <div class="control-label">TIME</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="delay_feedback" data-min="0" data-max="100"
                            data-value="40" data-suffix="%"></div>
                        <div class="control-label">FDBK</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="delay_mix" data-min="0" data-max="100" data-value="30"
                            data-suffix="%"></div>
                        <div class="control-label">MIX</div>
                    </div>
                </div>
            </div>

            <!-- 8. REVERB -->
            <div class="module-card" id="mod-reverb">
                <div class="module-header">
                    <span class="module-title">Reverb</span>
                    <div class="toggle" data-param="reverb_enable">
                        <div class="toggle-handle"></div>
                    </div>
                </div>
                <div class="module-content">
                    <div class="control-group">
                        <div class="knob-container" data-param="reverb_decay" data-min="0.1" data-max="10"
                            data-value="2.0" data-suffix="s"></div>
                        <div class="control-label">DECAY</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="reverb_size" data-min="0" data-max="100" data-value="50"
                            data-suffix="%"></div>
                        <div class="control-label">SIZE</div>
                    </div>
                    <div class="control-group">
                        <div class="knob-container" data-param="reverb_mix" data-min="0" data-max="100" data-value="30"
                            data-suffix="%"></div>
                        <div class="control-label">MIX</div>
                    </div>
                </div>
            </div>

        </main>
    </div>

</body>

</html>